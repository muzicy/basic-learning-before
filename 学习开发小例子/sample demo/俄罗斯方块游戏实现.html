<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>俄罗斯方块</title>
<style>
*{margin:o;padding:0;}
div {width:20px;height:20px;position:absolute;border:1px solid black;}
.normal {background:white;}
.active{background:red;}
#txt {left:250px;position:absolute;}
.fixed{background:#666666;}

</style>
<script type='text/javascript'>

var cols=10,rows=20;
var arr=[];
var oTxt=document.getElementById('txt');
oTxt.value=0;

function createBgBox(){
  var i=0,j=0;
  for(i=0;i<rows;i++){
  
    arr[i]=[];//定义一个空的数组
	
    for(j=0;j<cols;j++){
	
	  arr[i][j]=document.createElement('div');
	  
	  arr[i][j].style.top=i*24+'px';
	  arr[i][j].style.left=j*24+'px';
	  arr[i][j].className='normal'
	    
	  document.body.appendChild(arr[i][j]);
	}
  }
};

var nowBlock={type:0,cells:[]};

function createRandomBox(){
  type=Math.ceil(Math.random()*5);
 
  switch(type){
   case 1:nowBlock.cells=[[0,cols/2-2],[0,cols/2-1],[0,cols/2],[0,cols/2+1]];break;
   case 2 :nowBlock.cells=[[0,cols/2],[1,cols/2-1],[1,cols/2],[1,cols/2+1]];break;
   case 3:nowBlock.cells=[[0,cols/2-1],[0,cols/2],[1,cols/2-1],[1,cols/2]];break;
   case 4:nowBolck.cells=[[0,cols/2-1],[0,cols/2],[1,cols/2],[1,cols/2+1]];break;
   case 5:nowBlock.cells=[[0,cols/2-2],[0,cols/2-1],[0,cols/2],[1,cols/2-2]];break;   
  }
  
  for(var i=0;i<nowBlock.cells.length;i++){
    if(arr[nowBlock.cells[i][0]][nowBlock.cells[i][][1].className='fixed'){
	  finish();
	  clearInterval(timer);
	  document.onkeydown==null;
	  return;
	}
  }
  
  for(i=0;i<nowBlock.cells.length;i++)
   {
     arr[nowBlock.cells[i][0]][nowBlock.cells[i][1]].className='active';
   }
}

function finish(){
  alert('哈哈，你输了,你的得分是'+oTxt.value+'分，点击重新开始；')；
  window.loaction.reload();
}

function findFullLine(){
 
  var count=0;
  var aResult=[];
  
  for(var i=0;i<rows;i++){
    
	for(var j=0;j<cols;j++){
	  
	  if(arr[i][j].className=='fixed'){
	     count++;
	  }
	}
	if(count==cols){
	  aResult.push(i);
	}
  }
 return aResult; 
  
}

function clearFullLine(lines){
  
  for(var i=0;i<lines.length;i++){
    for(var j=lines[i];j>0;j--){
	  for(var k=0;k<cols;k++){
	    arr[j][k].className=arr[j-1][k].className;
	  }
	}
  }
  
}


window.onload=function(){





createBgBox()
}
</script>
</head>

<body>
<input id='txt' type='text'/>
</body>
</html>
