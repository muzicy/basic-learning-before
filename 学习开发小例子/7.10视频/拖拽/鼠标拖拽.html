<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
<style>
 #div1 {width:200px;height:200px;background:red;position:absolute;}
</style>
<script>

 window.onload=function() {
 
  var oDiv=document.getElementById("div1");
  
  var disX=0
  var disY=0;
  
  oDiv.onmousedown=function(ev) {
  
  var oEvent=ev||event;
  
  disX=ev.clientX-oDiv.offsetLeft;
  disY=ev.clientY-oDiv.offsetTop;
  
    document.onmousemove=function(ev) {
	
   var oEvent=ev||event;   
   
   var l=oEvent.clientX-disX;
   var t=oEvent.clientY-disY;
   oDiv.style.left=l+'px';
   oDiv.style.top=t+'px';
   
   if (l<0)
   {
    l=0;
   }
   else if (l>(document.documentElement.clientWidth-oDiv.offsetWidth));
   {
      l=(document.documentElement.clientWidth-oDiv.offsetWidth);
   }
   
    if (t<0)
   {
    t=0;
   }  
   
  else if (t>(document.documentElement.clientHeight-oDiv.offsetHeight));
   {
      t=(document.documentElement.clientHeigh-oDiv.offsetHeight);
   }
   
  
  }
  
   document.onmouseup=function() {
	
      oDiv.onmousemove=null;
	  oDiv.onmouseup=null;
   
  }
  
  }
  

  

  
  
  
 }
</script>
</head>

<body>
<div id="div1"></div>
</body>
</html>
